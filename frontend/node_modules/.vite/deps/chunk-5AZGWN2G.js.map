{
  "version": 3,
  "sources": ["../../invariant/browser.js", "../../@rpldy/shared/lib/esm/utils/isFunction.js", "../../@rpldy/shared/lib/esm/utils/isProduction.js", "../../@rpldy/shared/lib/esm/enums.js", "../../@rpldy/shared/lib/esm/index.js", "../../just-throttle/index.mjs", "../../@rpldy/shared/lib/esm/logger.js", "../../@rpldy/shared/lib/esm/consts.js", "../../@rpldy/shared/lib/esm/utils/hasWindow.js", "../../@rpldy/shared/lib/esm/triggerCancellable.js", "../../@rpldy/shared/lib/esm/utils/index.js", "../../@rpldy/shared/lib/esm/utils/isSamePropInArrays.js", "../../@rpldy/shared/lib/esm/utils/devFreeze.js", "../../@rpldy/shared/lib/esm/utils/isPlainObject.js", "../../@rpldy/shared/lib/esm/utils/merge.js", "../../@rpldy/shared/lib/esm/utils/clone.js", "../../@rpldy/shared/lib/esm/utils/pick.js", "../../@rpldy/shared/lib/esm/utils/isPromise.js", "../../@rpldy/shared/lib/esm/utils/scheduleIdleWork.js", "../../@rpldy/shared/lib/esm/utils/isEmpty.js", "../../@rpldy/shared/lib/esm/triggerUpdater.js", "../../@rpldy/shared/lib/esm/batchItem.js", "../../@rpldy/shared/lib/esm/request/XhrPromise.js", "../../@rpldy/shared/lib/esm/request/request.js", "../../@rpldy/shared/lib/esm/request/parseResponseHeaders.js", "../../@rpldy/shared/lib/esm/request/index.js", "../../@rpldy/uploader/lib/esm/consts.js", "../../@rpldy/sender/lib/esm/consts.js", "../../@rpldy/sender/lib/esm/MissingUrlError.js", "../../@rpldy/sender/lib/esm/xhrSender/prepareFormData.js", "../../@rpldy/sender/lib/esm/xhrSender/xhrSender.js", "../../@rpldy/sender/lib/esm/index.js", "../../@rpldy/uploader/lib/esm/defaults.js", "../../@rpldy/uploader/lib/esm/composeEnhancers.js", "../../@rpldy/life-events/lib/esm/defaults.js", "../../@rpldy/life-events/lib/esm/utils.js", "../../@rpldy/life-events/lib/esm/consts.js", "../../@rpldy/life-events/lib/esm/lifeEvents.js", "../../@rpldy/life-events/lib/esm/lifePack.js", "../../@rpldy/abort/lib/esm/fastAbort.js", "../../@rpldy/abort/lib/esm/abort.js", "../../@rpldy/abort/lib/esm/getAbortEnhancer.js", "../../@rpldy/abort/lib/esm/index.js", "../../@rpldy/simple-state/lib/esm/consts.js", "../../@rpldy/simple-state/lib/esm/utils.js", "../../@rpldy/simple-state/lib/esm/createState.js", "../../@rpldy/uploader/lib/esm/queue/itemHelpers.js", "../../@rpldy/uploader/lib/esm/queue/preSendPrepare.js", "../../@rpldy/uploader/lib/esm/queue/batchHelpers.js", "../../@rpldy/uploader/lib/esm/queue/processFinishedRequest.js", "../../@rpldy/uploader/lib/esm/queue/processBatchItems.js", "../../@rpldy/uploader/lib/esm/queue/processQueueNext.js", "../../@rpldy/uploader/lib/esm/queue/processAbort.js", "../../@rpldy/uploader/lib/esm/queue/uploaderQueue.js", "../../@rpldy/uploader/lib/esm/batchItemsSender.js", "../../@rpldy/uploader/lib/esm/utils.js", "../../@rpldy/uploader/lib/esm/batch.js", "../../@rpldy/uploader/lib/esm/processor.js", "../../@rpldy/uploader/lib/esm/uploader.js", "../../@rpldy/uploader/lib/esm/index.js", "../../@rpldy/shared-ui/lib/esm/uploadyVersion.js", "../../@rpldy/shared-ui/lib/esm/UploadyContext.js", "../../@rpldy/shared-ui/lib/esm/assertContext.js", "../../@rpldy/shared-ui/lib/esm/hooks/useUploadyContext.js", "../../@rpldy/shared-ui/lib/esm/hooks/hooksUtils.js", "../../@rpldy/shared-ui/lib/esm/hooks/eventListenerHooks.js", "../../@rpldy/shared-ui/lib/esm/consts.js", "../../@rpldy/shared-ui/lib/esm/utils.js", "../../@rpldy/shared-ui/lib/esm/NoDomUploady.js", "../../@rpldy/shared-ui/lib/esm/hooks/useUploader.js", "../../@rpldy/shared-ui/lib/esm/hooks/useUploadOptions.js", "../../@rpldy/shared-ui/lib/esm/hooks/useAbortItem.js", "../../@rpldy/shared-ui/lib/esm/hooks/useAbortBatch.js", "../../@rpldy/shared-ui/lib/esm/hooks/useAbortAll.js", "../../@rpldy/shared-ui/lib/esm/hocs/createRequestUpdateHoc.js", "../../@rpldy/shared-ui/lib/esm/hocs/withRequestPreSendUpdate.js", "../../@rpldy/shared-ui/lib/esm/hocs/withBatchStartUpdate.js"],
  "sourcesContent": ["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n", "function isFunction(f) {\n  return typeof f === \"function\";\n}\nmodule.exports = isFunction;", "function isProduction() {\n  return process.env.NODE_ENV === \"production\";\n}\nmodule.exports = isProduction;", "const BATCH_STATES = (enumObj => Object.freeze(enumObj))({\n  PENDING: \"pending\",\n  ADDED: \"added\",\n  PROCESSING: \"processing\",\n  UPLOADING: \"uploading\",\n  CANCELLED: \"cancelled\",\n  FINISHED: \"finished\",\n  ABORTED: \"aborted\",\n  ERROR: \"error\"\n});\nconst FILE_STATES = (enumObj => Object.freeze(enumObj))({\n  PENDING: \"pending\",\n  ADDED: \"added\",\n  UPLOADING: \"uploading\",\n  CANCELLED: \"cancelled\",\n  FINISHED: \"finished\",\n  ERROR: \"error\",\n  ABORTED: \"aborted\"\n});\nexport { BATCH_STATES, FILE_STATES };", "import invariant from \"invariant\";\nimport throttle from \"just-throttle\";\nimport * as logger from \"./logger\";\nimport triggerCancellable from \"./triggerCancellable\";\nimport triggerUpdater from \"./triggerUpdater\";\nimport createBatchItem, { getIsBatchItem } from \"./batchItem\";\nimport request, { parseResponseHeaders, XhrPromise } from \"./request\";\nexport { invariant, throttle, logger, triggerCancellable, triggerUpdater, createBatchItem, getIsBatchItem, request, parseResponseHeaders, XhrPromise };\nexport { isFunction, isPlainObject, isSamePropInArrays, devFreeze, merge, getMerge, clone, pick, hasWindow, isProduction, isPromise, scheduleIdleWork, isEmpty } from \"./utils\";\nexport { FILE_STATES, BATCH_STATES } from \"./enums\";", "var functionThrottle = throttle;\n\nfunction throttle(fn, interval, options) {\n  var timeoutId = null;\n  var throttledFn = null;\n  var leading = (options && options.leading);\n  var trailing = (options && options.trailing);\n\n  if (leading == null) {\n    leading = true; // default\n  }\n\n  if (trailing == null) {\n    trailing = !leading; //default\n  }\n\n  if (leading == true) {\n    trailing = false; // forced because there should be invocation per call\n  }\n\n  var cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  var flush = function() {\n    var call = throttledFn;\n    cancel();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var throttleWrapper = function() {\n    var callNow = leading && !timeoutId;\n    var context = this;\n    var args = arguments;\n\n    throttledFn = function() {\n      return fn.apply(context, args);\n    };\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(function() {\n        timeoutId = null;\n\n        if (trailing) {\n          return throttledFn();\n        }\n      }, interval);\n    }\n\n    if (callNow) {\n      callNow = false;\n      return throttledFn();\n    }\n  };\n\n  throttleWrapper.cancel = cancel;\n  throttleWrapper.flush = flush;\n\n  return throttleWrapper;\n}\n\nexport {functionThrottle as default};\n", "import { DEBUG_LOG_KEY } from \"./consts\";\nimport hasWindow from \"./utils/hasWindow\";\nlet isDebug = null;\nconst isDebugOn = () => {\n  if (typeof isDebug !== \"boolean\") {\n    isDebug = hasWindow() && (\"location\" in window && !!~window.location.search.indexOf(\"rpldy_debug=true\") || window[DEBUG_LOG_KEY] === true);\n  }\n  return !!isDebug;\n};\nconst setDebug = debugOn => {\n  if (hasWindow()) {\n    window[DEBUG_LOG_KEY] = debugOn;\n  }\n  isDebug = debugOn ? true : null;\n};\nconst debugLog = (...args) => {\n  if (isDebugOn()) {\n    console.log(...args);\n  }\n};\nexport { isDebugOn, setDebug, debugLog };", "export const DEBUG_LOG_KEY = \"__rpldy-logger-debug__\";", "const hasWindow = () => {\n  return typeof window === \"object\" && !!window.document;\n};\nexport default hasWindow;", "const triggerCancellable = (trigger, event, ...args) => {\n  const doTrigger = (event, ...args) => new Promise((resolve, reject) => {\n    const results = trigger(event, ...args);\n    if (results && results.length) {\n      Promise.all(results).catch(reject).then(resolvedResults => resolvedResults && resolve(!!~resolvedResults.findIndex(r => r === false)));\n    } else {\n      resolve(false);\n    }\n  });\n  return event ? doTrigger(event, ...args) : doTrigger;\n};\nexport default triggerCancellable;", "import isFunction from \"./isFunction\";\nimport isSamePropInArrays from \"./isSamePropInArrays\";\nimport devFreeze from \"./devFreeze\";\nimport merge, { getMerge } from \"./merge\";\nimport clone from \"./clone\";\nimport pick from \"./pick\";\nimport isPlainObject from \"./isPlainObject\";\nimport hasWindow from \"./hasWindow\";\nimport isProduction from \"./isProduction\";\nimport isPromise from \"./isPromise\";\nimport scheduleIdleWork from \"./scheduleIdleWork\";\nimport isEmpty from \"./isEmpty\";\nexport { isFunction, isSamePropInArrays, devFreeze, merge, getMerge, clone, pick, isPlainObject, hasWindow, isProduction, isPromise, scheduleIdleWork, isEmpty };", "const getPropsExtractor = prop => {\n  const props = [].concat(prop);\n  return arr => arr.map(i => props.map(p => i[p]).join());\n};\nconst isSamePropInArrays = (arr1, arr2, prop) => {\n  let diff = true;\n  const propsExtractor = getPropsExtractor(prop);\n  if (arr1 && arr2 && arr1.length === arr2.length) {\n    const props1 = propsExtractor(arr1),\n      props2 = propsExtractor(arr2);\n    diff = !!props1.find((p, i) => p !== props2[i]);\n  }\n  return !diff;\n};\nexport default isSamePropInArrays;", "import isProduction from \"./isProduction\";\nconst devFreeze = obj => isProduction() ? obj : Object.freeze(obj);\nexport default devFreeze;", "const isPlainObject = obj => {\n  const proto = Object.getPrototypeOf(Object(obj));\n  return !!obj && typeof obj === \"object\" && (proto?.constructor.name === \"Object\" || proto === null) && !Object.prototype.hasOwnProperty.call(obj, \"__proto__\");\n};\nexport default isPlainObject;", "import isPlainObject from \"./isPlainObject\";\nexport const isMergeObj = obj => isPlainObject(obj) || Array.isArray(obj);\nconst getKeys = (obj, options) => {\n  const keys = Object.keys(obj).filter(k => obj.hasOwnProperty(k) && k !== \"__proto__\");\n  return options.withSymbols ? keys.concat(Object.getOwnPropertySymbols(obj)) : keys;\n};\nconst getMerge = (options = {}) => {\n  const merge = (target, ...sources) => {\n    if (target && sources.length) {\n      sources.forEach(source => {\n        if (source) {\n          getKeys(source, options).forEach(key => {\n            const prop = source[key];\n            if (!options.predicate || options.predicate(key, prop)) {\n              if (typeof prop !== \"undefined\" || options.undefinedOverwrites) {\n                if (isMergeObj(prop)) {\n                  if (typeof target[key] === \"undefined\" || !isPlainObject(target[key])) {\n                    target[key] = Array.isArray(prop) ? [] : {};\n                  }\n                  merge(target[key], prop);\n                } else {\n                  target[key] = prop;\n                }\n              }\n            }\n          });\n        }\n      });\n    }\n    return target;\n  };\n  return merge;\n};\nexport default getMerge();\nexport { getMerge };", "import merge, { isMergeObj } from \"./merge\";\nconst clone = (obj, mergeFn = merge) => isMergeObj(obj) ? mergeFn(Array.isArray(obj) ? [] : {}, obj) : obj;\nexport default clone;", "const pick = (obj, props) => obj && Object.keys(obj).reduce((res, key) => {\n  if (~props.indexOf(key)) {\n    res[key] = obj[key];\n  }\n  return res;\n}, {});\nexport default pick;", "function isPromise(obj) {\n  return !!obj && typeof obj === \"object\" && typeof obj.then === \"function\";\n}\nexport default isPromise;", "import hasWindow from \"./hasWindow\";\nconst supportsIdle = hasWindow() && window.requestIdleCallback;\nconst scheduler = supportsIdle ? window.requestIdleCallback : setTimeout;\nconst clear = supportsIdle ? window.cancelIdleCallback : clearTimeout;\nconst scheduleIdleWork = (fn, timeout = 0) => {\n  const handler = scheduler(fn, supportsIdle ? {\n    timeout\n  } : timeout);\n  return () => clear(handler);\n};\nexport default scheduleIdleWork;", "function isEmpty(val) {\n  return val === null || val === undefined;\n}\nexport default isEmpty;", "import { isEmpty } from \"./utils\";\nconst triggerUpdater = (trigger, event, ...args) => {\n  const doTrigger = (event, ...args) => new Promise((resolve, reject) => {\n    const results = trigger(event, ...args);\n    if (results && results.length) {\n      Promise.all(results).catch(reject).then(resolvedResults => {\n        let result;\n        if (resolvedResults) {\n          while (isEmpty(result) && resolvedResults.length) {\n            result = resolvedResults.pop();\n          }\n        }\n        resolve(isEmpty(result) ? undefined : result);\n      });\n    } else {\n      resolve();\n    }\n  });\n  return event ? doTrigger(event, ...args) : doTrigger;\n};\nexport default triggerUpdater;", "import { FILE_STATES } from \"./enums\";\nconst BISYM = Symbol.for(\"__rpldy-bi__\");\nlet iCounter = 0;\nconst getBatchItemWithUrl = (batchItem, url) => {\n  batchItem.url = url;\n  return batchItem;\n};\nconst getBatchItemWithFile = (batchItem, file) => {\n  batchItem.file = file;\n  return batchItem;\n};\nconst isLikeFile = f => f && (f instanceof File || f instanceof Blob || !!(typeof f === \"object\" && f.name && f.type));\nconst getIsBatchItem = obj => {\n  return !!(typeof obj === \"object\" && obj.id && obj.batchId && obj[BISYM] === true);\n};\nconst createBatchItem = (f, batchId, isPending = false) => {\n  const isAlreadyBatchItem = getIsBatchItem(f);\n  iCounter += isAlreadyBatchItem ? 0 : 1;\n  const id = isAlreadyBatchItem && f.id && typeof f.id === \"string\" ? f.id : `${batchId}.item-${iCounter}`,\n    state = isPending ? FILE_STATES.PENDING : FILE_STATES.ADDED;\n  let batchItem = {\n    id,\n    batchId,\n    state,\n    uploadStatus: 0,\n    total: 0,\n    completed: 0,\n    loaded: 0,\n    recycled: isAlreadyBatchItem,\n    previousBatch: isAlreadyBatchItem ? f.batchId : null\n  };\n  Object.defineProperty(batchItem, BISYM, {\n    value: true,\n    writable: true\n  });\n  const fileData = isAlreadyBatchItem ? f.file || f.url : f;\n  if (typeof fileData === \"string\") {\n    batchItem = getBatchItemWithUrl(batchItem, fileData);\n  } else if (isLikeFile(fileData)) {\n    batchItem = getBatchItemWithFile(batchItem, fileData);\n  } else {\n    throw new Error(`Unknown type of file added: ${typeof fileData}`);\n  }\n  return batchItem;\n};\nexport default createBatchItem;\nexport { getIsBatchItem };", "class XhrPromise extends Promise {\n  constructor(fn, req) {\n    super(fn);\n    this.xhr = req;\n  }\n}\nexport default XhrPromise;", "import XhrPromise from \"./XhrPromise\";\nconst setHeaders = (req, headers) => {\n  if (headers) {\n    Object.keys(headers).forEach(name => {\n      if (headers[name] !== undefined) {\n        req.setRequestHeader(name, headers[name]);\n      }\n    });\n  }\n};\nconst request = (url, data, options = {}) => {\n  const req = new XMLHttpRequest();\n  return new XhrPromise((resolve, reject) => {\n    req.onerror = () => reject(req);\n    req.ontimeout = () => reject(req);\n    req.onabort = () => reject(req);\n    req.onload = () => resolve(req);\n    req.open(options?.method || \"GET\", url);\n    setHeaders(req, options?.headers);\n    req.withCredentials = !!options?.withCredentials;\n    options?.preSend?.(req);\n    req.send(data);\n  }, req);\n};\nexport default request;", "import { debugLog } from \"../logger\";\nconst parseResponseHeaders = xhr => {\n  let resHeaders;\n  try {\n    resHeaders = xhr.getAllResponseHeaders().trim().split(/[\\r\\n]+/).reduce((res, line) => {\n      const [key, val] = line.split(\": \");\n      res[key] = val;\n      return res;\n    }, {});\n  } catch (ex) {\n    debugLog(\"uploady.request: failed to read response headers\", xhr);\n  }\n  return resHeaders;\n};\nexport default parseResponseHeaders;", "import request from \"./request\";\nexport { default as parseResponseHeaders } from \"./parseResponseHeaders\";\nexport { default as XhrPromise } from \"./XhrPromise\";\nexport default request;", "import { devFreeze, FILE_STATES } from \"@rpldy/shared\";\nexport const UPLOADER_EVENTS = devFreeze({\n  BATCH_ADD: \"BATCH-ADD\",\n  BATCH_START: \"BATCH-START\",\n  BATCH_PROGRESS: \"BATCH_PROGRESS\",\n  BATCH_FINISH: \"BATCH-FINISH\",\n  BATCH_ABORT: \"BATCH-ABORT\",\n  BATCH_CANCEL: \"BATCH-CANCEL\",\n  BATCH_ERROR: \"BATCH-ERROR\",\n  BATCH_FINALIZE: \"BATCH-FINALIZE\",\n  ITEM_START: \"FILE-START\",\n  ITEM_CANCEL: \"FILE-CANCEL\",\n  ITEM_PROGRESS: \"FILE-PROGRESS\",\n  ITEM_FINISH: \"FILE-FINISH\",\n  ITEM_ABORT: \"FILE-ABORT\",\n  ITEM_ERROR: \"FILE-ERROR\",\n  ITEM_FINALIZE: \"FILE-FINALIZE\",\n  REQUEST_PRE_SEND: \"REQUEST_PRE_SEND\",\n  ALL_ABORT: \"ALL_ABORT\"\n});\nexport const PROGRESS_DELAY = 50;\nexport const SENDER_EVENTS = devFreeze({\n  ITEM_PROGRESS: \"ITEM_PROGRESS\",\n  BATCH_PROGRESS: \"BATCH_PROGRESS\"\n});\nexport const ITEM_FINALIZE_STATES = [FILE_STATES.FINISHED, FILE_STATES.ERROR, FILE_STATES.CANCELLED, FILE_STATES.ABORTED];", "export const XHR_SENDER_TYPE = \"rpldy-sender\";", "export default class MissingUrlError extends Error {\n  constructor(senderType) {\n    super(`${senderType} didn't receive upload URL`);\n    this.name = \"MissingUrlError\";\n  }\n}", "import { isFunction } from \"@rpldy/shared\";\nconst addToFormData = (fd, name, ...rest) => {\n  if (\"set\" in fd) {\n    fd.set(name, ...rest);\n  } else {\n    if (\"delete\" in fd) {\n      fd.delete(name);\n    }\n    fd.append(name, ...rest);\n  }\n};\nconst getFormFileField = (fd, items, options) => {\n  const single = items.length === 1;\n  items.forEach((item, i) => {\n    const name = single ? options.paramName : isFunction(options.formatGroupParamName) ? options.formatGroupParamName(i, options.paramName) : `${options.paramName}[${i}]`;\n    if (item.file) {\n      addToFormData(fd, name, item.file, item.file.name);\n    } else if (item.url) {\n      addToFormData(fd, name, item.url);\n    }\n  });\n};\nconst prepareFormData = (items, options) => {\n  const fd = new FormData();\n  if (options.params) {\n    Object.entries(options.params).forEach(([key, val]) => {\n      if (options.formDataAllowUndefined || val !== undefined) {\n        addToFormData(fd, key, val);\n      }\n    });\n  }\n  getFormFileField(fd, items, options);\n  return fd;\n};\nexport default prepareFormData;", "import { logger, FILE_STATES, request, parseResponseHeaders, pick, merge, isPromise } from \"@rpldy/shared\";\nimport { XHR_SENDER_TYPE } from \"../consts\";\nimport MissingUrlError from \"../MissingUrlError\";\nimport prepareFormData from \"./prepareFormData\";\nexport const SUCCESS_CODES = [200, 201, 202, 203, 204];\nconst getRequestData = (items, options) => {\n  let data;\n  if (options.sendWithFormData) {\n    logger.debugLog(`uploady.sender: sending ${items.length} item(s) as form data`);\n    data = prepareFormData(items, options);\n  } else {\n    if (items.length > 1) {\n      throw new Error(`XHR Sender - Request without form data can only contain 1 item. received ${items.length}`);\n    }\n    const item = items[0];\n    logger.debugLog(`uploady.sender: sending item ${item.id} as request body`);\n    data = item.file || item.url;\n  }\n  return data;\n};\nconst makeRequest = (items, url, options, onProgress, config) => {\n  let xhr;\n  const data = config?.getRequestData ? config.getRequestData(items, options) : getRequestData(items, options);\n  const issueRequest = (requestUrl = url, requestData = data, requestOptions) => {\n    const resolvedRequestOptions = merge({\n      ...pick(options, [\"method\", \"headers\", \"withCredentials\"]),\n      preSend: req => {\n        req.upload.onprogress = e => {\n          if (e.lengthComputable && onProgress) {\n            onProgress(e, items.slice());\n          }\n        };\n      }\n    }, requestOptions);\n    const realPXhr = request(requestUrl, requestData, resolvedRequestOptions);\n    xhr = realPXhr.xhr;\n    return realPXhr;\n  };\n  const pXhr = config?.preRequestHandler ? config.preRequestHandler(issueRequest, items, url, options, onProgress, config) : issueRequest();\n  return {\n    url,\n    count: items.length,\n    pXhr,\n    getXhr: () => xhr,\n    aborted: false\n  };\n};\nconst parseResponseJson = (response, headers, options) => {\n  let parsed = response;\n  const ct = headers?.[\"content-type\"];\n  if (options.forceJsonResponse || ct?.includes(\"json\")) {\n    try {\n      parsed = JSON.parse(response);\n    } catch {}\n  }\n  return parsed;\n};\nconst checkIsResponseSuccessful = (xhr, options) => {\n  const isSuccess = options.isSuccessfulCall ? options.isSuccessfulCall(xhr) : SUCCESS_CODES.includes(xhr.status);\n  return isPromise(isSuccess) ? isSuccess : Promise.resolve(isSuccess);\n};\nconst processResponse = (sendRequest, options) => sendRequest.pXhr.then(xhr => {\n  logger.debugLog(\"uploady.sender: received upload response \", xhr);\n  return checkIsResponseSuccessful(xhr, options).then(isSuccess => {\n    const state = isSuccess ? FILE_STATES.FINISHED : FILE_STATES.ERROR;\n    const status = xhr.status;\n    const resHeaders = parseResponseHeaders(xhr);\n    const response = {\n      data: options.formatServerResponse?.(xhr.response, status, resHeaders) ?? parseResponseJson(xhr.response, resHeaders, options),\n      headers: resHeaders\n    };\n    return {\n      status,\n      state,\n      response\n    };\n  });\n}).catch(error => {\n  let state, response;\n  if (sendRequest.aborted) {\n    state = FILE_STATES.ABORTED;\n    response = \"aborted\";\n  } else {\n    logger.debugLog(\"uploady.sender: upload failed: \", error);\n    state = FILE_STATES.ERROR;\n    response = error;\n  }\n  return {\n    error: true,\n    state,\n    response,\n    status: 0\n  };\n});\nconst abortRequest = sendRequest => {\n  let abortCalled = false;\n  const {\n    aborted,\n    getXhr\n  } = sendRequest;\n  const xhr = getXhr();\n  if (!aborted && xhr && xhr.readyState && xhr.readyState !== 4) {\n    logger.debugLog(`uploady.sender: cancelling request with ${sendRequest.count} items to: ${sendRequest.url}`);\n    xhr.abort();\n    sendRequest.aborted = true;\n    abortCalled = true;\n  }\n  return abortCalled;\n};\nconst getXhrSend = config => (items, url, options, onProgress) => {\n  if (!url) {\n    throw new MissingUrlError(XHR_SENDER_TYPE);\n  }\n  logger.debugLog(\"uploady.sender: sending file: \", {\n    items,\n    url,\n    options\n  });\n  const sendRequest = makeRequest(items, url, options, onProgress, config);\n  return {\n    request: processResponse(sendRequest, options),\n    abort: () => abortRequest(sendRequest),\n    senderType: XHR_SENDER_TYPE\n  };\n};\nexport default getXhrSend;", "import getXhrSend from \"./xhrSender/xhrSender\";\nimport { XHR_SENDER_TYPE } from \"./consts\";\nconst send = getXhrSend();\nexport default send;\nexport { send, getXhrSend, XHR_SENDER_TYPE };\nexport { default as MissingUrlError } from \"./MissingUrlError\";", "import { devFreeze } from \"@rpldy/shared\";\nexport const DEFAULT_PARAM_NAME = \"file\";\nexport const DEFAULT_FILTER = () => true;\nexport const DEFAULT_OPTIONS = devFreeze({\n  autoUpload: true,\n  clearPendingOnAdd: false,\n  inputFieldName: \"file\",\n  concurrent: false,\n  maxConcurrent: 2,\n  grouped: false,\n  maxGroupSize: 5,\n  method: \"POST\",\n  params: {},\n  fileFilter: DEFAULT_FILTER,\n  forceJsonResponse: false,\n  withCredentials: false,\n  destination: {},\n  send: null,\n  sendWithFormData: true,\n  formDataAllowUndefined: false,\n  fastAbortThreshold: 100\n});", "const composeEnhancers = (...enhancers) => (uploader, ...args) => enhancers.reduce((enhanced, e) => e(enhanced, ...args) || enhanced, uploader);\nexport default composeEnhancers;", "import { devFreeze } from \"@rpldy/shared\";\nconst defaults = devFreeze({\n  allowRegisterNonExistent: true,\n  canAddEvents: true,\n  canRemoveEvents: true,\n  collectStats: false\n});\nexport default defaults;", "import { isFunction } from \"@rpldy/shared\";\nconst validateFunction = (f, name) => {\n  if (!isFunction(f)) {\n    throw new Error(`'${name}' is not a valid function`);\n  }\n};\nconst isUndefined = val => typeof val === \"undefined\";\nexport { validateFunction, isUndefined };", "export const LESYM = Symbol.for(\"__le__\");\nexport const LE_PACK_SYM = Symbol.for(\"__le__pack__\");", "import { isPromise } from \"@rpldy/shared\";\nimport defaults from \"./defaults\";\nimport { validateFunction, isUndefined } from \"./utils\";\nimport { LESYM, LE_PACK_SYM } from \"./consts\";\nconst getLE = obj => obj ? obj[LESYM] : null;\nconst getValidLE = obj => {\n  const le = getLE(obj);\n  if (!le) {\n    throw new Error(\"Didnt find LE internal object. Something very bad happened!\");\n  }\n  return le;\n};\nconst isLE = obj => !!getLE(obj);\nconst addRegistration = (obj, name, cb, once = false) => {\n  validateFunction(cb, \"cb\");\n  const le = getValidLE(obj);\n  if (!le.options.allowRegisterNonExistent && !~le.events.indexOf(name)) {\n    throw new Error(`Cannot register for event ${name.toString()} that wasn't already defined (allowRegisterNonExistent = false)`);\n  }\n  const namedRegistry = le.registry[name] || [];\n  if (!namedRegistry.find(r => r.cb === cb)) {\n    namedRegistry.push({\n      name,\n      cb,\n      once\n    });\n    le.registry[name] = namedRegistry;\n  }\n  return () => unregister.call(obj, name, cb);\n};\nconst findRegistrations = (obj, name) => {\n  const registry = getValidLE(obj).registry;\n  return name ? registry[name] ? registry[name].slice() : [] : Object.values(registry).flat();\n};\nconst publicMethods = {\n  \"on\": register,\n  \"once\": registerOnce,\n  \"off\": unregister,\n  \"getEvents\": getEvents\n};\nconst getPublicMethods = () => Object.entries(publicMethods).reduce((res, [key, m]) => {\n  res[key] = {\n    value: m\n  };\n  return res;\n}, {});\nconst apiMethods = {\n  \"trigger\": trigger,\n  \"addEvent\": addEvent,\n  \"removeEvent\": removeEvent,\n  \"hasEvent\": hasEvent,\n  \"hasEventRegistrations\": hasEventRegistrations,\n  \"assign\": assign\n};\nconst createApi = target => Object.entries(apiMethods).reduce((res, [name, fn]) => {\n  res[name] = fn.bind(target);\n  return res;\n}, {\n  ...apiMethods,\n  target\n});\nconst cleanRegistryForName = (obj, name, force = false) => {\n  const registry = getValidLE(obj).registry;\n  if (registry[name] && (force || !registry[name].length)) {\n    delete registry[name];\n  }\n};\nconst removeRegItem = (obj, name, cb) => {\n  const registry = getValidLE(obj).registry;\n  if (registry[name]) {\n    if (!cb) {\n      cleanRegistryForName(obj, name, true);\n    } else {\n      registry[name] = registry[name].filter(reg => reg.cb !== cb);\n      cleanRegistryForName(obj, name);\n    }\n  }\n};\nfunction register(name, cb) {\n  return addRegistration(this, name, cb);\n}\nfunction registerOnce(name, cb) {\n  return addRegistration(this, name, cb, true);\n}\nfunction unregister(name, cb) {\n  removeRegItem(this, name, cb);\n}\nfunction getEvents() {\n  return getValidLE(this).events.slice();\n}\nfunction trigger(name, ...args) {\n  const regs = findRegistrations(this, name);\n  let results;\n  if (regs.length) {\n    let packValue;\n    if (args.length === 1 && args[0]?.[LE_PACK_SYM] === true) {\n      packValue = args[0].resolve();\n    }\n    results = regs.map(r => {\n      let result;\n      if (r.once) {\n        removeRegItem(this, name, r.cb);\n      }\n      if (packValue) {\n        result = r.cb(...packValue);\n      } else if (!args.length) {\n        result = r.cb();\n      } else if (args.length === 1) {\n        result = r.cb(args[0]);\n      } else if (args.length === 2) {\n        result = r.cb(args[0], args[1]);\n      } else if (args.length === 3) {\n        result = r.cb(args[0], args[1], args[2]);\n      } else {\n        result = r.cb(...args);\n      }\n      return result;\n    }).filter(result => !isUndefined(result)).map(result => isPromise(result) ? result : Promise.resolve(result));\n  }\n  return results && (results.length ? results : undefined);\n}\nfunction assign(toObj) {\n  const le = getValidLE(this);\n  defineLifeData(toObj, le.options, le.events, le.registry, le.stats);\n  return createApi(toObj);\n}\nfunction addEvent(name) {\n  const le = getValidLE(this);\n  if (le.options.canAddEvents) {\n    const index = le.events.indexOf(name);\n    if (!~index) {\n      le.events.push(name);\n    } else {\n      throw new Error(`Event '${name}' already defined`);\n    }\n  } else {\n    throw new Error(\"Cannot add new events (canAddEvents = false)\");\n  }\n}\nfunction removeEvent(name) {\n  const le = getValidLE(this);\n  if (le.options.canRemoveEvents) {\n    const index = le.events.indexOf(name);\n    le.events.splice(index, 1);\n  } else {\n    throw new Error(\"Cannot remove events (canRemoveEvents = false)\");\n  }\n}\nfunction hasEvent(name) {\n  const le = getValidLE(this);\n  return !!~le.events.indexOf(name);\n}\nfunction hasEventRegistrations(name) {\n  return !!findRegistrations(this, name).length;\n}\nconst defineLifeData = (target, options, events = [], registry = {}, stats = {}) => {\n  Object.defineProperties(target, {\n    [LESYM]: {\n      value: Object.seal({\n        registry,\n        events,\n        options,\n        stats\n      })\n    },\n    ...getPublicMethods()\n  });\n};\nconst addLife = (target, events = [], options) => {\n  const useTarget = target || {};\n  const usedOptions = {\n    ...defaults,\n    ...options\n  };\n  if (!isLE(useTarget)) {\n    defineLifeData(useTarget, usedOptions, events);\n  }\n  return createApi(useTarget);\n};\nexport default addLife;\nexport { isLE };", "import { LE_PACK_SYM } from \"./consts\";\nconst createLifePack = creator => {\n  const lp = {\n    resolve: () => [].concat(creator())\n  };\n  Object.defineProperty(lp, LE_PACK_SYM, {\n    value: true,\n    configurable: false\n  });\n  return lp;\n};\nexport default createLifePack;", "const fastAbortBatch = (batch, aborts) => {\n  batch.items.forEach(({\n    id\n  }) => aborts[id]?.());\n};\nconst fastAbortAll = aborts => {\n  Object.values(aborts).forEach(fn => fn());\n};\nexport { fastAbortAll, fastAbortBatch };", "import { FILE_STATES, logger } from \"@rpldy/shared\";\nimport { fastAbortAll, fastAbortBatch } from \"./fastAbort\";\nconst abortNonUploadingItem = (item, aborts, finalizeItem) => {\n  logger.debugLog(`abort: aborting ${item.state.valueOf()} item  - `, item);\n  finalizeItem(item.id, {\n    status: 0,\n    state: FILE_STATES.ABORTED,\n    response: \"aborted\"\n  });\n  return true;\n};\nconst ITEM_STATE_ABORTS = {\n  [FILE_STATES.UPLOADING]: (item, aborts) => {\n    logger.debugLog(`abort: aborting uploading item  - `, item);\n    return aborts[item.id]();\n  },\n  [FILE_STATES.ADDED]: abortNonUploadingItem,\n  [FILE_STATES.PENDING]: abortNonUploadingItem\n};\nconst callAbortOnItem = (item, aborts, finalizeItem) => {\n  const itemState = item?.state;\n  const method = !!itemState && ITEM_STATE_ABORTS[itemState.valueOf()];\n  return method ? method(item, aborts, finalizeItem) : false;\n};\nconst abortItem = (id, items, aborts, finalizeItem) => callAbortOnItem(items[id], aborts, finalizeItem);\nconst getIsFastAbortNeeded = (count, threshold) => {\n  let result = false;\n  if (threshold !== 0 && threshold) {\n    result = count >= threshold;\n  }\n  return result;\n};\nconst abortAll = (items, aborts, queue, finalizeItem, options) => {\n  const itemIds = Object.values(queue).flat();\n  const isFastAbort = getIsFastAbortNeeded(itemIds.length, options.fastAbortThreshold);\n  logger.debugLog(`abort: doing abort-all (${isFastAbort ? \"fast\" : \"normal\"} abort)`);\n  if (isFastAbort) {\n    fastAbortAll(aborts);\n  } else {\n    itemIds.forEach(id => abortItem(id, items, aborts, finalizeItem));\n  }\n  return {\n    isFast: isFastAbort\n  };\n};\nconst abortBatch = (batch, batchOptions, aborts, queue, finalizeItem, options) => {\n  const threshold = batchOptions.fastAbortThreshold === 0 ? 0 : batchOptions.fastAbortThreshold || options.fastAbortThreshold;\n  const isFastAbort = getIsFastAbortNeeded(queue[batch.id].length, threshold);\n  logger.debugLog(`abort: doing abort-batch on: ${batch.id} (${isFastAbort ? \"fast\" : \"normal\"} abort)`);\n  if (isFastAbort) {\n    fastAbortBatch(batch, aborts);\n  } else {\n    batch.items.forEach(bi => callAbortOnItem(bi, aborts, finalizeItem));\n  }\n  return {\n    isFast: isFastAbort\n  };\n};\nexport { abortAll, abortBatch, abortItem };", "import { abortAll, abortBatch, abortItem } from \"./abort\";\nconst getAbortEnhancer = () => {\n  return uploader => {\n    uploader.update({\n      abortAll,\n      abortBatch,\n      abortItem\n    });\n    return uploader;\n  };\n};\nexport default getAbortEnhancer;", "import getAbortEnhancer from \"./getAbortEnhancer\";\nexport default getAbortEnhancer;", "export const PROXY_SYM = Symbol.for(\"__rpldy-sstt-proxy__\");\nexport const STATE_SYM = Symbol.for(\"__rpldy-sstt-state__\");", "import { PROXY_SYM } from \"./consts\";\nimport { isPlainObject, isProduction, hasWindow } from \"@rpldy/shared\";\nconst isProxy = obj => !isProduction() && !!obj && !!~Object.getOwnPropertySymbols(obj).indexOf(PROXY_SYM);\nconst isNativeFile = obj => hasWindow() && obj instanceof File || obj.name && obj.size && obj.uri;\nconst isProxiable = obj => Array.isArray(obj) || isPlainObject(obj) && !isNativeFile(obj);\nexport { isProxy, isProxiable };", "import { clone, getMerge, isProduction } from \"@rpldy/shared\";\nimport { PROXY_SYM, STATE_SYM } from \"./consts\";\nimport { isProxiable, isProxy } from \"./utils\";\nconst mergeWithSymbols = getMerge({\n  withSymbols: true,\n  predicate: key => key !== PROXY_SYM && key !== STATE_SYM\n});\nconst getIsUpdateable = proxy => isProduction() ? true : proxy[STATE_SYM].isUpdateable;\nconst setIsUpdateable = (proxy, value) => {\n  if (!isProduction()) {\n    proxy[STATE_SYM].isUpdateable = value;\n  }\n};\nconst deepProxy = (obj, traps) => {\n  let proxy;\n  if (isProxiable(obj)) {\n    if (!isProxy(obj)) {\n      obj[PROXY_SYM] = true;\n      proxy = new Proxy(obj, traps);\n    }\n    Object.keys(obj).forEach(key => {\n      obj[key] = deepProxy(obj[key], traps);\n    });\n  }\n  return proxy || obj;\n};\nconst unwrapProxy = proxy => isProxy(proxy) ? clone(proxy, mergeWithSymbols) : proxy;\nconst createState = obj => {\n  const traps = {\n    set: (obj, key, value) => {\n      if (getIsUpdateable(proxy)) {\n        obj[key] = deepProxy(value, traps);\n      }\n      return true;\n    },\n    get: (obj, key) => {\n      return key === PROXY_SYM ? unwrapProxy(obj) : obj[key];\n    },\n    defineProperty: () => {\n      throw new Error(\"Simple State doesnt support defining property\");\n    },\n    setPrototypeOf: () => {\n      throw new Error(\"Simple State doesnt support setting prototype\");\n    },\n    deleteProperty: (obj, key) => {\n      if (getIsUpdateable(proxy)) {\n        delete obj[key];\n      }\n      return true;\n    }\n  };\n  if (!isProduction() && !isProxy(obj)) {\n    Object.defineProperty(obj, STATE_SYM, {\n      value: {\n        isUpdateable: false\n      },\n      configurable: true\n    });\n  }\n  const proxy = !isProduction() ? deepProxy(obj, traps) : obj;\n  return {\n    state: proxy,\n    update: fn => {\n      if (!isProduction() && getIsUpdateable(proxy)) {\n        throw new Error(\"Can't call update on State already being updated!\");\n      }\n      try {\n        setIsUpdateable(proxy, true);\n        fn(proxy);\n      } finally {\n        setIsUpdateable(proxy, false);\n      }\n      return proxy;\n    },\n    unwrap: entry => entry ? unwrapProxy(entry) : isProxy(proxy) ? unwrapProxy(proxy) : proxy\n  };\n};\nexport default createState;\nexport { isProxy, unwrapProxy as unwrap };", "import { ITEM_FINALIZE_STATES } from \"../consts\";\nconst finalizeItem = (queue, id, delItem = false) => {\n  queue.updateState(state => {\n    const {\n      batchId\n    } = state.items[id] || {\n      batchId: null\n    };\n    if (delItem) {\n      delete state.items[id];\n    }\n    const index = batchId ? state.itemQueue[batchId].indexOf(id) : -1;\n    if (~index && batchId) {\n      state.itemQueue[batchId].splice(index, 1);\n    }\n    const activeIndex = state.activeIds.indexOf(id);\n    if (~activeIndex) {\n      state.activeIds.splice(activeIndex, 1);\n    }\n    if (batchId && state.batches[batchId].itemBatchOptions[id]) {\n      delete state.batches[batchId].itemBatchOptions[id];\n    }\n  });\n};\nconst getIsItemExists = (queue, itemId) => !!queue.getState().items[itemId];\nconst getIsItemFinalized = item => ITEM_FINALIZE_STATES.includes(item.state);\nexport { finalizeItem, getIsItemExists, getIsItemFinalized };", "import { getMerge, isSamePropInArrays, logger, triggerUpdater } from \"@rpldy/shared\";\nimport { getIsItemFinalized } from \"./itemHelpers\";\nconst mergeWithUndefined = getMerge({\n  undefinedOverwrites: true\n});\nconst processPrepareResponse = (eventType, items, options, updated) => {\n  let usedOptions = options,\n    usedItems = items;\n  if (updated && typeof updated !== \"boolean\") {\n    logger.debugLog(`uploader.queue: REQUEST_PRE_SEND(${eventType}) event returned updated items/options`, updated);\n    if (updated.items) {\n      if (updated.items.length !== items.length || !isSamePropInArrays(updated.items, items, [\"id\", \"batchId\", \"recycled\"])) {\n        throw new Error(`REQUEST_PRE_SEND(${eventType}) event handlers must return same items with same ids`);\n      }\n      usedItems = updated.items;\n    }\n    if (updated.options) {\n      usedOptions = mergeWithUndefined({}, options, updated.options);\n    }\n  }\n  return {\n    items: usedItems,\n    options: usedOptions,\n    cancelled: updated === false\n  };\n};\nconst triggerItemsPrepareEvent = (queue, eventSubject, items, options, eventType, validateResponse) => triggerUpdater(queue.trigger, eventType, eventSubject, options).then(updated => {\n  validateResponse?.(updated);\n  return processPrepareResponse(eventType, items, options, updated);\n});\nconst persistPrepareResponse = (queue, prepared) => {\n  const batchId = prepared.items[0].batchId;\n  if (prepared.items[0] && queue.getState().batches[batchId]) {\n    queue.updateState(state => {\n      prepared.items.forEach(i => {\n        if (!getIsItemFinalized(state.items[i.id])) {\n          state.items[i.id] = i;\n        }\n      });\n      const batchData = state.batches[batchId];\n      prepared.items.forEach(({\n        id\n      }) => {\n        batchData.itemBatchOptions[id] = prepared.options;\n      });\n    });\n    const updatedState = queue.getState();\n    prepared.items = prepared.items.map(item => updatedState.items[item.id]);\n    const batchData = updatedState.batches[batchId];\n    prepared.options = batchData.itemBatchOptions[prepared.items[0].id] || batchData.batchOptions;\n  }\n};\nconst prepareItems = (queue, subject, retrieveItemsFromSubject, createEventSubject, validateResponse, eventType) => {\n  const items = retrieveItemsFromSubject(subject);\n  const batchOptions = queue.getState().batches[items[0].batchId].batchOptions;\n  const eventSubject = createEventSubject?.(subject, batchOptions) || subject;\n  return triggerItemsPrepareEvent(queue, eventSubject, items, batchOptions, eventType, validateResponse).then(prepared => {\n    if (!prepared.cancelled) {\n      persistPrepareResponse(queue, prepared);\n    }\n    return prepared;\n  });\n};\nconst getItemsPrepareUpdater = (eventType, retrieveItemsFromSubject, createEventSubject = null, validateResponse = null) => (queue, subject) => prepareItems(queue, subject, retrieveItemsFromSubject, createEventSubject, validateResponse, eventType);\nexport { getItemsPrepareUpdater };", "import { BATCH_STATES, logger, merge, FILE_STATES, scheduleIdleWork } from \"@rpldy/shared\";\nimport { unwrap } from \"@rpldy/simple-state\";\nimport { UPLOADER_EVENTS } from \"../consts\";\nimport { getItemsPrepareUpdater } from \"./preSendPrepare\";\nimport { finalizeItem, getIsItemExists } from \"./itemHelpers\";\nconst prepareBatchStartItems = getItemsPrepareUpdater(UPLOADER_EVENTS.BATCH_START, batch => batch.items, null, ({\n  batch\n} = {\n  batch: false\n}) => {\n  if (batch) {\n    throw new Error(`BATCH_START event handlers cannot update batch data. Only items & options`);\n  }\n});\nconst BATCH_READY_STATES = [BATCH_STATES.ADDED, BATCH_STATES.PROCESSING, BATCH_STATES.UPLOADING];\nconst BATCH_FINISHED_STATES = [BATCH_STATES.ABORTED, BATCH_STATES.CANCELLED, BATCH_STATES.FINISHED, BATCH_STATES.ERROR];\nconst getBatchFromState = (state, id) => state.batches[id].batch;\nconst getBatch = (queue, id) => {\n  return getBatchFromState(queue.getState(), id);\n};\nconst getBatchDataFromItemId = (queue, itemId) => {\n  const state = queue.getState();\n  const item = state.items[itemId];\n  return state.batches[item.batchId];\n};\nconst getBatchFromItemId = (queue, itemId) => {\n  return getBatchDataFromItemId(queue, itemId).batch;\n};\nconst removeBatchItems = (queue, batchId) => {\n  const batch = getBatch(queue, batchId);\n  batch.items.forEach(({\n    id\n  }) => finalizeItem(queue, id, true));\n};\nconst removeBatch = (queue, batchId) => {\n  queue.updateState(state => {\n    delete state.batches[batchId];\n    delete state.itemQueue[batchId];\n    const batchQueueIndex = state.batchQueue.indexOf(batchId);\n    if (~batchQueueIndex) {\n      state.batchQueue.splice(batchQueueIndex, 1);\n    }\n    const pendingFlagIndex = state.batchesStartPending.indexOf(batchId);\n    if (~pendingFlagIndex) {\n      state.batchesStartPending.splice(pendingFlagIndex, 1);\n    }\n  });\n};\nconst finalizeBatch = (queue, batchId, eventType, finalState = BATCH_STATES.FINISHED, additionalInfo) => {\n  queue.updateState(state => {\n    const batch = getBatchFromState(state, batchId);\n    batch.state = finalState;\n    if (additionalInfo) {\n      batch.additionalInfo = additionalInfo;\n    }\n  });\n  triggerUploaderBatchEvent(queue, batchId, eventType);\n  triggerUploaderBatchEvent(queue, batchId, UPLOADER_EVENTS.BATCH_FINALIZE);\n};\nconst cancelBatchWithId = (queue, batchId) => {\n  logger.debugLog(\"uploady.uploader.batchHelpers: cancelling batch: \", batchId);\n  finalizeBatch(queue, batchId, UPLOADER_EVENTS.BATCH_CANCEL, BATCH_STATES.CANCELLED);\n  removeBatchItems(queue, batchId);\n  removeBatch(queue, batchId);\n};\nconst cancelBatchForItem = (queue, itemId) => {\n  if (getIsItemExists(queue, itemId)) {\n    const data = getBatchDataFromItemId(queue, itemId),\n      batchId = data?.batch.id;\n    if (batchId) {\n      cancelBatchWithId(queue, batchId);\n    } else {\n      logger.debugLog(`uploady.uploader.batchHelpers: cancel batch called for batch already removed (item id = ${itemId})`);\n    }\n  }\n};\nconst failBatchForItem = (queue, itemId, err) => {\n  const batch = getBatchFromItemId(queue, itemId),\n    batchId = batch.id;\n  logger.debugLog(\"uploady.uploader.batchHelpers: failing batch: \", {\n    batch\n  });\n  finalizeBatch(queue, batchId, UPLOADER_EVENTS.BATCH_ERROR, BATCH_STATES.ERROR, err.message);\n  removeBatchItems(queue, batchId);\n  removeBatch(queue, batchId);\n};\nconst isItemBatchStartPending = (queue, itemId) => {\n  const batch = getBatchFromItemId(queue, itemId);\n  return queue.getState().batchesStartPending.includes(batch.id);\n};\nconst isNewBatchStarting = (queue, itemId) => {\n  const batch = getBatchFromItemId(queue, itemId);\n  return queue.getState().currentBatch !== batch.id;\n};\nconst loadNewBatchForItem = (queue, itemId) => {\n  const batch = getBatchFromItemId(queue, itemId);\n  queue.updateState(state => {\n    state.batchesStartPending.push(batch.id);\n  });\n  return prepareBatchStartItems(queue, batch).then(({\n    cancelled\n  }) => {\n    let alreadyFinished = false;\n    queue.updateState(state => {\n      const pendingFlagIndex = state.batchesStartPending.indexOf(batch.id);\n      state.batchesStartPending.splice(pendingFlagIndex, 1);\n    });\n    if (!cancelled) {\n      alreadyFinished = !getIsItemExists(queue, itemId);\n      if (!alreadyFinished) {\n        queue.updateState(state => {\n          state.currentBatch = batch.id;\n        });\n      }\n    }\n    return !cancelled && !alreadyFinished;\n  });\n};\nconst cleanUpFinishedBatches = queue => {\n  scheduleIdleWork(() => {\n    const state = queue.getState();\n    Object.keys(state.batches).forEach(batchId => {\n      const {\n        batch,\n        finishedCounter\n      } = state.batches[batchId];\n      const {\n        orgItemCount\n      } = batch;\n      const alreadyFinalized = getIsBatchFinalized(batch);\n      if (orgItemCount === finishedCounter) {\n        if (!alreadyFinalized && batch.completed !== 100) {\n          queue.updateState(state => {\n            const batch = getBatchFromState(state, batchId);\n            batch.completed = 100;\n            batch.loaded = batch.items.reduce((res, {\n              loaded\n            }) => res + loaded, 0);\n          });\n          triggerUploaderBatchEvent(queue, batchId, UPLOADER_EVENTS.BATCH_PROGRESS);\n        }\n        queue.updateState(state => {\n          if (state.currentBatch === batchId) {\n            state.currentBatch = null;\n          }\n        });\n        logger.debugLog(`uploady.uploader.batchHelpers: cleaning up batch: ${batch.id}`);\n        if (!alreadyFinalized) {\n          finalizeBatch(queue, batchId, UPLOADER_EVENTS.BATCH_FINISH);\n        }\n        removeBatchItems(queue, batchId);\n        removeBatch(queue, batchId);\n      }\n    });\n  });\n};\nconst triggerUploaderBatchEvent = (queue, batchId, event) => {\n  const state = queue.getState(),\n    {\n      batch,\n      batchOptions\n    } = state.batches[batchId],\n    stateItems = state.items;\n  const eventBatch = {\n    ...unwrap(batch),\n    items: batch.items.map(({\n      id\n    }) => unwrap(stateItems[id]))\n  };\n  queue.trigger(event, eventBatch, unwrap(batchOptions));\n};\nconst getIsBatchReady = (queue, batchId) => {\n  const batch = getBatchFromState(queue.getState(), batchId);\n  return BATCH_READY_STATES.includes(batch.state);\n};\nconst detachRecycledFromPreviousBatch = (queue, item) => {\n  const {\n    previousBatch\n  } = item;\n  if (item.recycled && previousBatch && queue.getState().batches[previousBatch]) {\n    const {\n      id: batchId\n    } = getBatchFromItemId(queue, item.id);\n    if (batchId === previousBatch) {\n      queue.updateState(state => {\n        const batch = getBatchFromState(state, batchId);\n        const index = batch.items.findIndex(({\n          id\n        }) => id === item.id);\n        if (~index) {\n          batch.items.splice(index, 1);\n        }\n        if (state.batches[batchId].itemBatchOptions[item.id]) {\n          delete state.batches[batchId].itemBatchOptions[item.id];\n        }\n      });\n    }\n  }\n};\nconst preparePendingForUpload = (queue, uploadOptions) => {\n  queue.updateState(state => {\n    Object.keys(state.batches).forEach(batchId => {\n      const batchData = state.batches[batchId];\n      const {\n        batch,\n        batchOptions\n      } = batchData;\n      if (batch.state === BATCH_STATES.PENDING) {\n        batch.items.forEach(item => {\n          item.state = FILE_STATES.ADDED;\n        });\n        batch.state = BATCH_STATES.ADDED;\n        batchData.batchOptions = merge({}, batchOptions, uploadOptions);\n      }\n    });\n  });\n};\nconst removePendingBatches = queue => {\n  const batches = queue.getState().batches;\n  Object.keys(batches).filter(batchId => batches[batchId].batch.state === BATCH_STATES.PENDING).forEach(batchId => {\n    removeBatchItems(queue, batchId);\n    removeBatch(queue, batchId);\n  });\n};\nconst incrementBatchFinishedCounter = (queue, batchId) => {\n  queue.updateState(state => {\n    state.batches[batchId].finishedCounter += 1;\n  });\n};\nconst getIsBatchFinalized = batch => BATCH_FINISHED_STATES.includes(batch.state);\nconst clearBatchData = (queue, batchId) => {\n  queue.updateState(state => {\n    const {\n      items\n    } = getBatchFromState(state, batchId);\n    delete state.batches[batchId];\n    delete state.itemQueue[batchId];\n    const indx = state.batchQueue.indexOf(batchId);\n    if (~indx) {\n      state.batchQueue.splice(indx, 1);\n    }\n    if (state.currentBatch === batchId) {\n      state.currentBatch = null;\n    }\n    items.forEach(({\n      id\n    }) => {\n      delete state.items[id];\n      const activeIndex = state.activeIds.indexOf(id);\n      if (~activeIndex) {\n        state.activeIds.splice(activeIndex, 1);\n      }\n    });\n  });\n};\nexport { loadNewBatchForItem, isNewBatchStarting, cancelBatchWithId, cancelBatchForItem, getBatchFromItemId, getBatchDataFromItemId, cleanUpFinishedBatches, triggerUploaderBatchEvent, getIsBatchReady, getBatchFromState, detachRecycledFromPreviousBatch, preparePendingForUpload, removePendingBatches, incrementBatchFinishedCounter, getIsBatchFinalized, failBatchForItem, finalizeBatch, removeBatchItems, clearBatchData, isItemBatchStartPending };", "import { FILE_STATES, logger } from \"@rpldy/shared\";\nimport { UPLOADER_EVENTS, ITEM_FINALIZE_STATES } from \"../consts\";\nimport { cleanUpFinishedBatches, incrementBatchFinishedCounter, getBatchDataFromItemId } from \"./batchHelpers\";\nimport { finalizeItem } from \"./itemHelpers\";\nexport const FILE_STATE_TO_EVENT_MAP = {\n  [FILE_STATES.PENDING.valueOf()]: null,\n  [FILE_STATES.ADDED.valueOf()]: UPLOADER_EVENTS.ITEM_START,\n  [FILE_STATES.FINISHED.valueOf()]: UPLOADER_EVENTS.ITEM_FINISH,\n  [FILE_STATES.ERROR.valueOf()]: UPLOADER_EVENTS.ITEM_ERROR,\n  [FILE_STATES.CANCELLED.valueOf()]: UPLOADER_EVENTS.ITEM_CANCEL,\n  [FILE_STATES.ABORTED.valueOf()]: UPLOADER_EVENTS.ITEM_ABORT,\n  [FILE_STATES.UPLOADING.valueOf()]: UPLOADER_EVENTS.ITEM_PROGRESS\n};\nconst getIsFinalized = item => !!~ITEM_FINALIZE_STATES.indexOf(item.state);\nconst processFinishedRequest = (queue, finishedData, next) => {\n  finishedData.forEach(itemData => {\n    const state = queue.getState();\n    const {\n      id,\n      info\n    } = itemData;\n    logger.debugLog(\"uploader.processor.queue: request finished for item - \", {\n      id,\n      info\n    });\n    if (state.items[id]) {\n      queue.updateState(state => {\n        const item = state.items[id];\n        item.state = info.state;\n        item.uploadResponse = info.response;\n        item.uploadStatus = info.status;\n        if (getIsFinalized(item)) {\n          delete state.aborts[id];\n        }\n      });\n      const item = queue.getState().items[id];\n      if (info.state === FILE_STATES.FINISHED && item.completed < 100) {\n        const size = item.file?.size || 0;\n        queue.handleItemProgress(item, 100, size, size);\n      }\n      const {\n        itemBatchOptions\n      } = getBatchDataFromItemId(queue, id);\n      const batchOptions = itemBatchOptions[id];\n      const itemState = item.state.valueOf();\n      if (FILE_STATE_TO_EVENT_MAP[itemState]) {\n        queue.trigger(FILE_STATE_TO_EVENT_MAP[itemState], item, batchOptions);\n      }\n      if (getIsFinalized(item)) {\n        incrementBatchFinishedCounter(queue, item.batchId);\n        queue.trigger(UPLOADER_EVENTS.ITEM_FINALIZE, item, batchOptions);\n      }\n    }\n    finalizeItem(queue, id);\n  });\n  cleanUpFinishedBatches(queue);\n  next(queue);\n};\nexport default processFinishedRequest;", "import { FILE_STATES, logger } from \"@rpldy/shared\";\nimport { UPLOADER_EVENTS } from \"../consts\";\nimport processFinishedRequest from \"./processFinishedRequest\";\nimport { getItemsPrepareUpdater } from \"./preSendPrepare\";\nimport { getIsItemFinalized } from \"./itemHelpers\";\nimport { getBatchDataFromItemId } from \"./batchHelpers\";\nconst preparePreRequestItems = getItemsPrepareUpdater(UPLOADER_EVENTS.REQUEST_PRE_SEND, items => items, (items, options) => ({\n  items,\n  options\n}));\nconst updateUploadingState = (queue, items, sendResult) => {\n  queue.updateState(state => {\n    items.forEach(bi => {\n      const item = state.items[bi.id];\n      item.state = FILE_STATES.UPLOADING;\n      state.aborts[bi.id] = sendResult.abort;\n    });\n  });\n};\nconst sendAllowedItems = (queue, itemsSendData, next) => {\n  const {\n    items,\n    options\n  } = itemsSendData;\n  const batch = queue.getState().batches[items[0].batchId]?.batch;\n  if (batch) {\n    let sendResult;\n    try {\n      sendResult = queue.sender.send(items, batch, options);\n    } catch (ex) {\n      logger.debugLog(`uploader.queue: sender failed with unexpected error`, ex);\n      sendResult = {\n        request: Promise.resolve({\n          status: 0,\n          state: FILE_STATES.ERROR,\n          response: ex.message\n        }),\n        abort: () => false,\n        senderType: \"exception-handler\"\n      };\n    }\n    const {\n      request\n    } = sendResult;\n    updateUploadingState(queue, items, sendResult);\n    request.then(requestInfo => {\n      const finishedData = items.map(item => ({\n        id: item.id,\n        info: requestInfo\n      }));\n      processFinishedRequest(queue, finishedData, next);\n    });\n  }\n};\nconst reportCancelledItems = (queue, items, cancelledResults, next) => {\n  const cancelledItemsIds = cancelledResults.map((isCancelled, index) => isCancelled ? items[index].id : null).filter(Boolean);\n  if (cancelledItemsIds.length) {\n    const finishedData = cancelledItemsIds.map(id => ({\n      id,\n      info: {\n        status: 0,\n        state: FILE_STATES.CANCELLED,\n        response: \"cancel\"\n      }\n    }));\n    processFinishedRequest(queue, finishedData, next);\n  }\n  return !!cancelledItemsIds.length;\n};\nconst reportPreparedError = (error, queue, items, next) => {\n  const finishedData = items.map(({\n    id\n  }) => ({\n    id,\n    info: {\n      status: 0,\n      state: FILE_STATES.ERROR,\n      response: error\n    }\n  }));\n  processFinishedRequest(queue, finishedData, next);\n};\nconst getAllowedItem = (id, queue) => {\n  const item = queue.getState().items[id];\n  return item && !getIsItemFinalized(item) ? item : undefined;\n};\nconst processAllowedItems = ({\n  allowedItems,\n  cancelledResults,\n  queue,\n  items,\n  ids,\n  next\n}) => {\n  const afterPreparePromise = allowedItems.length ? preparePreRequestItems(queue, allowedItems) : Promise.resolve();\n  let finalCancelledResults = cancelledResults;\n  return afterPreparePromise.catch(err => {\n    logger.debugLog(\"uploader.queue: encountered error while preparing items for request\", err);\n    reportPreparedError(err, queue, items, next);\n  }).then(itemsSendData => {\n    let nextP;\n    if (itemsSendData) {\n      if (itemsSendData.cancelled) {\n        finalCancelledResults = ids.map(() => true);\n      } else {\n        const hasAborted = itemsSendData.items.some(item => getIsItemFinalized(item));\n        if (!hasAborted) {\n          sendAllowedItems(queue, {\n            items: itemsSendData.items,\n            options: itemsSendData.options\n          }, next);\n        } else {\n          logger.debugLog(\"uploader.queue: send data contains aborted items - not sending\");\n        }\n      }\n    }\n    if (!reportCancelledItems(queue, items, finalCancelledResults, next)) {\n      nextP = next(queue);\n    }\n    return nextP;\n  });\n};\nconst processBatchItems = (queue, ids, next) => {\n  const state = queue.getState();\n  let items = Object.values(state.items);\n  items = items.filter(item => ids.includes(item.id) && !getIsItemFinalized(item));\n  return Promise.all(items.map(i => {\n    const {\n      batchOptions\n    } = getBatchDataFromItemId(queue, i.id);\n    return queue.runCancellable(UPLOADER_EVENTS.ITEM_START, i, batchOptions);\n  })).then(cancelledResults => {\n    let allowedItems = cancelledResults.map((isCancelled, index) => isCancelled ? null : getAllowedItem(items[index].id, queue)).filter(Boolean);\n    return {\n      allowedItems,\n      cancelledResults,\n      queue,\n      items,\n      ids,\n      next\n    };\n  }).then(processAllowedItems);\n};\nexport default processBatchItems;", "import { logger, FILE_STATES } from \"@rpldy/shared\";\nimport processBatchItems from \"./processBatchItems\";\nimport { getIsBatchReady, isNewBatchStarting, cancelBatchForItem, loadNewBatchForItem, failBatchForItem, isItemBatchStartPending } from \"./batchHelpers\";\nconst getIsItemInActiveRequest = (queue, itemId) => {\n  return queue.getState().activeIds.flat().includes(itemId);\n};\nconst getIsItemReady = item => item.state.valueOf() === FILE_STATES.ADDED.valueOf();\nexport const findNextItemIndex = queue => {\n  const state = queue.getState(),\n    itemQueue = state.itemQueue,\n    items = state.items;\n  let nextItemId = null,\n    batchIndex = 0,\n    itemIndex = 0,\n    batchId = state.batchQueue[batchIndex];\n  while (batchId && !nextItemId) {\n    if (getIsBatchReady(queue, batchId)) {\n      nextItemId = itemQueue[batchId][itemIndex];\n      while (nextItemId && (getIsItemInActiveRequest(queue, nextItemId) || !getIsItemReady(items[nextItemId]))) {\n        itemIndex += 1;\n        nextItemId = itemQueue[batchId][itemIndex];\n      }\n    }\n    if (!nextItemId) {\n      batchIndex += 1;\n      batchId = state.batchQueue[batchIndex];\n      itemIndex = 0;\n    }\n  }\n  return nextItemId ? [batchId, itemIndex] : null;\n};\nexport const getNextIdGroup = queue => {\n  const state = queue.getState(),\n    itemQueue = state.itemQueue,\n    [nextBatchId, nextItemIndex] = findNextItemIndex(queue) || [];\n  let nextId = nextBatchId && ~nextItemIndex ? itemQueue[nextBatchId][nextItemIndex] : null,\n    nextGroup;\n  if (nextId) {\n    const {\n        batchOptions\n      } = state.batches[nextBatchId],\n      groupMax = batchOptions.maxGroupSize || 0;\n    if (batchOptions.grouped && groupMax > 1) {\n      const batchItems = state.itemQueue[nextBatchId];\n      nextGroup = batchItems.slice(nextItemIndex, nextItemIndex + groupMax);\n    } else {\n      nextGroup = [nextId];\n    }\n  }\n  return nextGroup;\n};\nconst updateItemsAsActive = (queue, ids) => {\n  queue.updateState(state => {\n    state.activeIds = state.activeIds.concat(ids);\n  });\n};\nconst processNextWithBatch = (queue, ids) => {\n  let newBatchP;\n  if (!isItemBatchStartPending(queue, ids[0])) {\n    updateItemsAsActive(queue, ids);\n    if (isNewBatchStarting(queue, ids[0])) {\n      newBatchP = loadNewBatchForItem(queue, ids[0]).then(allowBatch => {\n        let cancelled = !allowBatch;\n        if (cancelled) {\n          cancelBatchForItem(queue, ids[0]);\n          processNext(queue);\n        }\n        return cancelled;\n      }).catch(err => {\n        logger.debugLog(\"uploader.processor: encountered error while preparing batch for request\", err);\n        failBatchForItem(queue, ids[0], err);\n        processNext(queue);\n        return true;\n      });\n    } else {\n      newBatchP = Promise.resolve(false);\n    }\n  } else {\n    newBatchP = Promise.resolve(true);\n  }\n  return newBatchP;\n};\nconst processNext = queue => {\n  let processPromise;\n  const ids = getNextIdGroup(queue);\n  if (ids) {\n    const currentCount = queue.getCurrentActiveCount(),\n      {\n        concurrent = !!0,\n        maxConcurrent = 0\n      } = queue.getOptions();\n    if (!currentCount || concurrent && currentCount < maxConcurrent) {\n      logger.debugLog(\"uploader.processor: Processing next upload - \", {\n        ids,\n        currentCount\n      });\n      processPromise = processNextWithBatch(queue, ids).then(failedOrCancelled => {\n        if (!failedOrCancelled) {\n          processBatchItems(queue, ids, processNext);\n          if (concurrent) {\n            processNext(queue);\n          }\n        }\n      });\n    }\n  }\n  return processPromise;\n};\nexport default processNext;", "import { invariant, BATCH_STATES } from \"@rpldy/shared\";\nimport { UPLOADER_EVENTS } from \"../consts\";\nimport processFinishedRequest from \"./processFinishedRequest\";\nimport processQueueNext from \"./processQueueNext\";\nimport { getIsBatchFinalized, finalizeBatch } from \"./batchHelpers\";\nconst getFinalizeAbortedItem = queue => (id, data) => processFinishedRequest(queue, [{\n  id,\n  info: data\n}], processQueueNext);\nconst processAbortItem = (queue, id) => {\n  const abortItemMethod = queue.getOptions().abortItem;\n  invariant(!!abortItemMethod, \"Abort Item method not provided yet abortItem was called\");\n  const state = queue.getState();\n  return abortItemMethod(id, state.items, state.aborts, getFinalizeAbortedItem(queue));\n};\nconst processAbortBatch = (queue, id) => {\n  const abortBatchMethod = queue.getOptions().abortBatch;\n  invariant(!!abortBatchMethod, \"Abort Batch method not provided yet abortItem was called\");\n  const state = queue.getState(),\n    batchData = state.batches[id],\n    batch = batchData?.batch;\n  if (batch && !getIsBatchFinalized(batch)) {\n    finalizeBatch(queue, id, UPLOADER_EVENTS.BATCH_ABORT, BATCH_STATES.ABORTED);\n    const {\n      isFast\n    } = abortBatchMethod(batch, batchData.batchOptions, state.aborts, state.itemQueue, getFinalizeAbortedItem(queue), queue.getOptions());\n    if (isFast) {\n      queue.clearBatchUploads(batch.id);\n    }\n  }\n};\nconst processAbortAll = queue => {\n  const abortAllMethod = queue.getOptions().abortAll;\n  invariant(!!abortAllMethod, \"Abort All method not provided yet abortAll was called\");\n  queue.trigger(UPLOADER_EVENTS.ALL_ABORT);\n  const state = queue.getState();\n  const {\n    isFast\n  } = abortAllMethod(state.items, state.aborts, state.itemQueue, getFinalizeAbortedItem(queue), queue.getOptions());\n  if (isFast) {\n    queue.clearAllUploads();\n  }\n};\nexport { processAbortItem, processAbortBatch, processAbortAll };", "import { logger, hasWindow, isFunction, scheduleIdleWork } from \"@rpldy/shared\";\nimport createState from \"@rpldy/simple-state\";\nimport { SENDER_EVENTS, UPLOADER_EVENTS } from \"../consts\";\nimport processQueueNext from \"./processQueueNext\";\nimport { processAbortItem, processAbortBatch, processAbortAll } from \"./processAbort\";\nimport { detachRecycledFromPreviousBatch, getBatchFromState, preparePendingForUpload, removePendingBatches, clearBatchData, cancelBatchWithId, triggerUploaderBatchEvent } from \"./batchHelpers\";\nconst createUploaderQueue = (options, trigger, cancellable, sender, uploaderId) => {\n  const {\n    state,\n    update\n  } = createState({\n    itemQueue: {},\n    batchQueue: [],\n    currentBatch: null,\n    batchesStartPending: [],\n    batches: {},\n    items: {},\n    activeIds: [],\n    aborts: {}\n  });\n  const getState = () => state;\n  const updateState = updater => {\n    update(updater);\n  };\n  const add = item => {\n    if (state.items[item.id] && !item.recycled) {\n      throw new Error(`Uploader queue conflict - item ${item.id} already exists`);\n    }\n    if (item.recycled) {\n      detachRecycledFromPreviousBatch(queueState, item);\n    }\n    updateState(state => {\n      state.items[item.id] = item;\n    });\n  };\n  const handleItemProgress = (item, completed, loaded, total) => {\n    if (state.items[item.id]) {\n      updateState(state => {\n        const stateItem = state.items[item.id];\n        stateItem.loaded = loaded;\n        stateItem.completed = completed;\n        stateItem.total = total;\n      });\n      trigger(UPLOADER_EVENTS.ITEM_PROGRESS, getState().items[item.id]);\n    }\n  };\n  sender.on(SENDER_EVENTS.ITEM_PROGRESS, handleItemProgress);\n  sender.on(SENDER_EVENTS.BATCH_PROGRESS, batch => {\n    const batchItems = state.batches[batch.id]?.batch.items;\n    if (batchItems) {\n      const [loaded, total] = batchItems.reduce((res, {\n        id\n      }) => {\n        const {\n          loaded,\n          file\n        } = state.items[id];\n        const size = file?.size || loaded || 1;\n        res[0] += loaded;\n        res[1] += size;\n        return res;\n      }, [0, 0]);\n      updateState(state => {\n        const stateBatch = state.batches[batch.id].batch;\n        stateBatch.total = total;\n        stateBatch.loaded = loaded;\n        stateBatch.completed = loaded / total;\n      });\n      triggerUploaderBatchEvent(queueState, batch.id, UPLOADER_EVENTS.BATCH_PROGRESS);\n    }\n  });\n  const queueState = {\n    uploaderId,\n    getOptions: () => options,\n    getCurrentActiveCount: () => state.activeIds.length,\n    getState,\n    updateState,\n    trigger,\n    runCancellable: (name, ...args) => {\n      if (!isFunction(cancellable)) {\n        throw new Error(\"Uploader queue - cancellable is of wrong type\");\n      }\n      return cancellable(name, ...args);\n    },\n    sender,\n    handleItemProgress,\n    clearAllUploads: () => {\n      queueState.updateState(state => {\n        state.itemQueue = {};\n        state.batchQueue = [];\n        state.currentBatch = null;\n        state.batches = {};\n        state.items = {};\n        state.activeIds = [];\n      });\n    },\n    clearBatchUploads: batchId => {\n      scheduleIdleWork(() => {\n        logger.debugLog(`uploader.queue: started scheduled work to clear batch uploads (${batchId})`);\n        if (getState().batches[batchId]) {\n          clearBatchData(queueState, batchId);\n        }\n      });\n    }\n  };\n  if (hasWindow() && logger.isDebugOn()) {\n    window[`__rpldy_${uploaderId}_queue_state`] = queueState;\n  }\n  return {\n    updateState,\n    getState: queueState.getState,\n    runCancellable: queueState.runCancellable,\n    uploadBatch: (batch, batchOptions) => {\n      if (batchOptions) {\n        updateState(state => {\n          state.batches[batch.id].batchOptions = batchOptions;\n        });\n      }\n      processQueueNext(queueState);\n    },\n    addBatch: (batch, batchOptions) => {\n      updateState(state => {\n        state.batches[batch.id] = {\n          batch,\n          batchOptions,\n          itemBatchOptions: {},\n          finishedCounter: 0\n        };\n        state.batchQueue.push(batch.id);\n        state.itemQueue[batch.id] = batch.items.map(({\n          id\n        }) => id);\n      });\n      batch.items.forEach(add);\n      return getBatchFromState(state, batch.id);\n    },\n    abortItem: (...args) => processAbortItem(queueState, ...args),\n    abortBatch: (...args) => processAbortBatch(queueState, ...args),\n    abortAll: (...args) => processAbortAll(queueState, ...args),\n    clearPendingBatches: () => {\n      removePendingBatches(queueState);\n    },\n    uploadPendingBatches: uploadOptions => {\n      preparePendingForUpload(queueState, uploadOptions);\n      processQueueNext(queueState);\n    },\n    cancelBatch: batch => cancelBatchWithId(queueState, batch.id)\n  };\n};\nexport default createUploaderQueue;", "import { isFunction, logger, throttle } from \"@rpldy/shared\";\nimport addLife from \"@rpldy/life-events\";\nimport defaultSend from \"@rpldy/sender\";\nimport { PROGRESS_DELAY, SENDER_EVENTS } from \"./consts\";\nimport { DEFAULT_OPTIONS, DEFAULT_PARAM_NAME } from \"./defaults\";\nconst reportItemsProgress = (items, completed, loaded, total, trigger) => {\n  items.forEach(item => {\n    logger.debugLog(`uploady.uploader.processor: file: ${item.id} progress event: loaded(${loaded}) - completed(${completed})`);\n    trigger(SENDER_EVENTS.ITEM_PROGRESS, item, completed, loaded, total);\n  });\n};\nconst onItemUploadProgress = (items, batch, e, trigger) => {\n  const completed = Math.min(e.loaded / e.total * 100, 100),\n    completedPerItem = completed / items.length,\n    loadedAverage = e.loaded / items.length;\n  reportItemsProgress(items, completedPerItem, loadedAverage, e.total, trigger);\n  trigger(SENDER_EVENTS.BATCH_PROGRESS, batch);\n};\nconst createBatchItemsSender = () => {\n  const {\n    trigger,\n    target: sender\n  } = addLife({\n    send: (items, batch, batchOptions) => {\n      const destination = batchOptions.destination,\n        url = destination?.url;\n      const throttledProgress = throttle(e => onItemUploadProgress(items, batch, e, trigger), PROGRESS_DELAY, true);\n      const send = isFunction(batchOptions.send) ? batchOptions.send : defaultSend;\n      return send(items, url, {\n        method: destination?.method || batchOptions.method || DEFAULT_OPTIONS.method,\n        paramName: destination?.filesParamName || batchOptions.inputFieldName || DEFAULT_PARAM_NAME,\n        params: {\n          ...batchOptions.params,\n          ...destination?.params\n        },\n        forceJsonResponse: batchOptions.forceJsonResponse,\n        withCredentials: batchOptions.withCredentials,\n        formatGroupParamName: batchOptions.formatGroupParamName,\n        headers: destination?.headers,\n        sendWithFormData: batchOptions.sendWithFormData,\n        formatServerResponse: batchOptions.formatServerResponse,\n        formDataAllowUndefined: batchOptions.formDataAllowUndefined,\n        isSuccessfulCall: batchOptions.isSuccessfulCall\n      }, throttledProgress);\n    }\n  }, Object.values(SENDER_EVENTS));\n  return sender;\n};\nexport default createBatchItemsSender;", "import { hasWindow, isProduction } from \"@rpldy/shared\";\nimport { unwrap, isProxiable, isProxy } from \"@rpldy/simple-state\";\nimport { DEFAULT_OPTIONS } from \"./defaults\";\nconst FILE_LIST_SUPPORT = hasWindow() && \"FileList\" in window;\nconst getMandatoryDestination = dest => {\n  return {\n    params: {},\n    ...dest\n  };\n};\nconst getMandatoryOptions = options => {\n  return {\n    ...DEFAULT_OPTIONS,\n    ...options,\n    destination: options && options.destination ? getMandatoryDestination(options.destination) : null\n  };\n};\nconst getIsFileList = files => FILE_LIST_SUPPORT && files instanceof FileList || files.toString() === \"[object FileList]\";\nconst deepProxyUnwrap = (obj, level = 0) => {\n  let result = obj;\n  if (!isProduction()) {\n    if (level < 3 && isProxy(obj)) {\n      result = unwrap(obj);\n    } else if (level < 3 && isProxiable(obj)) {\n      result = Array.isArray(obj) ? obj.map(sub => deepProxyUnwrap(sub, level + 1)) : Object.keys(obj).reduce((res, key) => {\n        res[key] = deepProxyUnwrap(obj[key], level + 1);\n        return res;\n      }, {});\n    }\n  }\n  return result;\n};\nexport { getMandatoryOptions, getIsFileList, deepProxyUnwrap };", "import { BATCH_STATES, createBatchItem, getIsBatchItem, isPromise } from \"@rpldy/shared\";\nimport { DEFAULT_FILTER } from \"./defaults\";\nimport { getIsFileList } from \"./utils\";\nlet bCounter = 0;\nconst processFiles = (batchId, files, isPending, fileFilter) => {\n  const all = fileFilter ? Array.prototype.map.call(files, f => getIsBatchItem(f) ? f.file || f.url : f) : [];\n  return Promise.all(Array.prototype.map.call(files, (f, index) => {\n    const filterResult = (fileFilter || DEFAULT_FILTER)(all[index], index, all);\n    return isPromise(filterResult) ? filterResult.then(result => !!result && f) : !!filterResult && f;\n  })).then(filtered => filtered.filter(Boolean).map(f => createBatchItem(f, batchId, isPending)));\n};\nconst createBatch = (files, uploaderId, options) => {\n  bCounter += 1;\n  const id = `batch-${bCounter}`;\n  const isFileList = getIsFileList(files);\n  const usedFiles = Array.isArray(files) || isFileList ? files : [files];\n  const isPending = !options.autoUpload;\n  return processFiles(id, usedFiles, isPending, options.fileFilter).then(items => {\n    return {\n      id,\n      uploaderId,\n      items,\n      state: isPending ? BATCH_STATES.PENDING : BATCH_STATES.ADDED,\n      completed: 0,\n      loaded: 0,\n      orgItemCount: items.length,\n      additionalInfo: null\n    };\n  });\n};\nexport default createBatch;", "import { logger } from \"@rpldy/shared\";\nimport { UPLOADER_EVENTS } from \"./consts\";\nimport createUploadQueue from \"./queue\";\nimport createItemsSender from \"./batchItemsSender\";\nimport createBatch from \"./batch\";\nconst createProcessor = (trigger, cancellable, options, uploaderId) => {\n  const sender = createItemsSender(),\n    queue = createUploadQueue(options, trigger, cancellable, sender, uploaderId);\n  return {\n    abortBatch: batchId => {\n      queue.abortBatch(batchId);\n    },\n    abort: id => {\n      if (id) {\n        queue.abortItem(id);\n      } else {\n        queue.abortAll();\n      }\n    },\n    addNewBatch: (files, processOptions) => createBatch(files, uploaderId, processOptions).then(batch => {\n      let resultP;\n      if (batch.items.length) {\n        const addedBatch = queue.addBatch(batch, processOptions);\n        resultP = queue.runCancellable(UPLOADER_EVENTS.BATCH_ADD, addedBatch, processOptions).then(isCancelled => {\n          if (!isCancelled) {\n            logger.debugLog(`uploady.uploader [${uploaderId}]: new items added - auto upload =\n                       ${String(processOptions.autoUpload)}`, addedBatch.items);\n            if (processOptions.autoUpload) {\n              queue.uploadBatch(addedBatch);\n            }\n          } else {\n            queue.cancelBatch(addedBatch);\n          }\n          return addedBatch;\n        });\n      } else {\n        logger.debugLog(`uploady.uploader: no items to add. batch ${batch.id} is empty. check fileFilter if this isn't intended`);\n      }\n      return resultP || Promise.resolve(null);\n    }),\n    clearPendingBatches: () => {\n      queue.clearPendingBatches();\n    },\n    processPendingBatches: uploadOptions => {\n      queue.uploadPendingBatches(uploadOptions);\n    }\n  };\n};\nexport default createProcessor;", "import addLife, { createLifePack } from \"@rpldy/life-events\";\nimport { invariant, logger, triggerCancellable, devFreeze, merge, clone } from \"@rpldy/shared\";\nimport getAbortEnhancer from \"@rpldy/abort\";\nimport getProcessor from \"./processor\";\nimport { UPLOADER_EVENTS } from \"./consts\";\nimport { getMandatoryOptions, deepProxyUnwrap } from \"./utils\";\nimport composeEnhancers from \"./composeEnhancers\";\nconst EVENT_NAMES = Object.values(UPLOADER_EVENTS);\nconst EXT_OUTSIDE_ENHANCER_TIME = \"Uploady - uploader extensions can only be registered by enhancers\",\n  EXT_ALREADY_EXISTS = \"Uploady - uploader extension by this name [%s] already exists\";\nlet counter = 0;\nconst getComposedEnhancer = extEnhancer => composeEnhancers(getAbortEnhancer(), extEnhancer);\nconst getEnhancedUploader = (uploader, options, triggerWithUnwrap, setEnhancerTime) => {\n  const enhancer = options.enhancer ? getComposedEnhancer(options.enhancer) : getAbortEnhancer();\n  setEnhancerTime(true);\n  const enhanced = enhancer(uploader, triggerWithUnwrap);\n  setEnhancerTime(false);\n  return enhanced || uploader;\n};\nconst createUploader = options => {\n  counter += 1;\n  const uploaderId = `uploader-${counter}`;\n  let enhancerTime = false;\n  const extensions = {};\n  logger.debugLog(`uploady.uploader: creating new instance (${uploaderId})`, {\n    options,\n    counter\n  });\n  let uploaderOptions = getMandatoryOptions(options);\n  const clearPending = () => {\n    processor.clearPendingBatches();\n  };\n  const getOptions = () => {\n    return clone(uploaderOptions);\n  };\n  let {\n    trigger,\n    target: uploader\n  } = addLife({\n    id: uploaderId,\n    update: updateOptions => {\n      uploaderOptions = merge({}, uploaderOptions, updateOptions);\n      return uploader;\n    },\n    add: (files, addOptions) => {\n      const processOptions = merge({}, uploaderOptions, addOptions);\n      if (processOptions.clearPendingOnAdd) {\n        clearPending();\n      }\n      return processor.addNewBatch(files, processOptions).then(() => {\n        logger.debugLog(`uploady.uploader: finished adding file data to be processed`);\n      });\n    },\n    upload: uploadOptions => {\n      processor.processPendingBatches(uploadOptions);\n    },\n    abort: id => {\n      processor.abort(id);\n    },\n    abortBatch: id => {\n      processor.abortBatch(id);\n    },\n    getOptions,\n    clearPending,\n    registerExtension: (name, methods) => {\n      invariant(enhancerTime, EXT_OUTSIDE_ENHANCER_TIME);\n      invariant(!extensions[name], EXT_ALREADY_EXISTS, name);\n      logger.debugLog(`uploady.uploader: registering extension: ${name.toString()}`, methods);\n      extensions[name] = methods;\n    },\n    getExtension: name => {\n      return extensions[name];\n    }\n  }, EVENT_NAMES, {\n    canAddEvents: false,\n    canRemoveEvents: false\n  });\n  const triggerWithUnwrap = (name, ...data) => {\n    const lp = createLifePack(() => data.map(deepProxyUnwrap));\n    return trigger(name, lp);\n  };\n  const cancellable = triggerCancellable(triggerWithUnwrap);\n  const enhancedUploader = getEnhancedUploader(uploader, uploaderOptions, triggerWithUnwrap, state => {\n    enhancerTime = state;\n  });\n  const processor = getProcessor(triggerWithUnwrap, cancellable, uploaderOptions, enhancedUploader.id);\n  return devFreeze(enhancedUploader);\n};\nexport default createUploader;", "import createUploader from \"./uploader\";\nimport composeEnhancers from \"./composeEnhancers\";\nimport { UPLOADER_EVENTS } from \"./consts\";\nimport { DEFAULT_OPTIONS } from \"./defaults\";\nexport default createUploader;\nexport { UPLOADER_EVENTS, DEFAULT_OPTIONS, composeEnhancers, createUploader };\nexport * from \"@rpldy/sender\";\nexport { FILE_STATES, BATCH_STATES } from \"@rpldy/shared\";", "import { hasWindow } from \"@rpldy/shared\";\nexport const GLOBAL_VERSION_SYM = Symbol.for(\"_rpldy-version_\");\nconst getVersion = () => \"1.11.0\" || \"\";\nconst getGlobal = () => hasWindow() ? window : globalThis || process;\nconst getRegisteredVersion = () => {\n  const global = getGlobal();\n  return global[GLOBAL_VERSION_SYM];\n};\nconst registerUploadyContextVersion = () => {\n  const global = getGlobal();\n  global[GLOBAL_VERSION_SYM] = getVersion();\n};\nconst getIsVersionRegisteredAndDifferent = () => {\n  const registeredVersion = getRegisteredVersion();\n  return !!registeredVersion && registeredVersion !== getVersion();\n};\nexport { getVersion, getRegisteredVersion, registerUploadyContextVersion, getIsVersionRegisteredAndDifferent };", "import React from \"react\";\nimport { logger, invariant } from \"@rpldy/shared\";\nimport { registerUploadyContextVersion } from \"./uploadyVersion\";\nconst UploadyContext = /*#__PURE__*/React.createContext(null);\nconst NO_INPUT_ERROR_MSG = \"Uploady - Context. File input isn't available\";\nexport const createContextApi = (uploader, internalInputRef) => {\n  let fileInputRef, showFileUploadOptions;\n  let isUsingExternalInput = false;\n  if (internalInputRef) {\n    fileInputRef = internalInputRef;\n  } else {\n    logger.debugLog(\"Uploady context - didn't receive input field ref - waiting for external ref\");\n  }\n  const getInputField = () => fileInputRef?.current;\n  const getInternalFileInput = () => {\n    if (fileInputRef) {\n      isUsingExternalInput = true;\n    }\n    return fileInputRef;\n  };\n  const getIsUsingExternalInput = () => isUsingExternalInput;\n  const onFileInputChange = () => {\n    const input = getInputField();\n    invariant(input, NO_INPUT_ERROR_MSG);\n    input.removeEventListener(\"change\", onFileInputChange);\n    const addOptions = showFileUploadOptions;\n    showFileUploadOptions = null;\n    upload(input.files, addOptions);\n  };\n  const upload = (files, addOptions) => {\n    uploader.add(files, addOptions);\n  };\n  registerUploadyContextVersion();\n  return {\n    hasUploader: () => !!uploader,\n    getInternalFileInput,\n    setExternalFileInput: extRef => {\n      isUsingExternalInput = true;\n      fileInputRef = extRef;\n    },\n    getIsUsingExternalInput,\n    showFileUpload: addOptions => {\n      const input = getInputField();\n      invariant(input, NO_INPUT_ERROR_MSG);\n      showFileUploadOptions = addOptions;\n      input.removeEventListener(\"change\", onFileInputChange);\n      input.addEventListener(\"change\", onFileInputChange);\n      input.value = \"\";\n      input.click();\n    },\n    upload,\n    processPending: uploadOptions => {\n      uploader.upload(uploadOptions);\n    },\n    clearPending: () => {\n      uploader.clearPending();\n    },\n    setOptions: options => {\n      uploader.update(options);\n    },\n    getOptions: () => {\n      return uploader.getOptions();\n    },\n    getExtension: name => {\n      return uploader.getExtension(name);\n    },\n    abort: itemId => {\n      uploader.abort(itemId);\n    },\n    abortBatch: batchId => {\n      uploader.abortBatch(batchId);\n    },\n    on: (name, cb) => {\n      return uploader.on(name, cb);\n    },\n    once: (name, cb) => {\n      return uploader.once(name, cb);\n    },\n    off: (name, cb) => {\n      return uploader.off(name, cb);\n    }\n  };\n};\nexport default UploadyContext;", "import { invariant } from \"@rpldy/shared\";\nimport { getIsVersionRegisteredAndDifferent, getRegisteredVersion } from \"./uploadyVersion\";\nexport const ERROR_MSG = \"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>\";\nexport const DIFFERENT_VERSION_ERROR_MSG = `Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s`;\nconst assertContext = context => {\n  invariant(!getIsVersionRegisteredAndDifferent(), DIFFERENT_VERSION_ERROR_MSG, getRegisteredVersion());\n  invariant(context && context.hasUploader(), ERROR_MSG);\n  return context;\n};\nexport default assertContext;", "import { useContext } from \"react\";\nimport UploadyContext from \"../UploadyContext\";\nimport assertContext from \"../assertContext\";\nconst useUploadyContext = () => assertContext(useContext(UploadyContext));\nexport default useUploadyContext;", "import { useState, useCallback, useEffect } from \"react\";\nimport { isFunction } from \"@rpldy/shared\";\nimport useUploadyContext from \"./useUploadyContext\";\nconst useEventEffect = (event, fn) => {\n  const context = useUploadyContext();\n  const {\n    on,\n    off\n  } = context;\n  useEffect(() => {\n    on(event, fn);\n    return () => {\n      off(event, fn);\n    };\n  }, [event, fn, on, off]);\n};\nconst generateUploaderEventHookWithState = (event, stateCalculator) => (fn, id) => {\n  const [eventState, setEventState] = useState(null);\n  let cbFn = fn;\n  let usedId = id;\n  if (fn && !isFunction(fn)) {\n    usedId = fn;\n    cbFn = undefined;\n  }\n  const eventCallback = useCallback((eventObj, ...args) => {\n    if (!usedId || eventObj.id === usedId) {\n      setEventState(stateCalculator(eventObj, ...args));\n      if (isFunction(cbFn)) {\n        cbFn(eventObj, ...args);\n      }\n    }\n  }, [cbFn, usedId]);\n  useEventEffect(event, eventCallback);\n  return eventState;\n};\nconst generateUploaderEventHook = (event, canScope = true) => (fn, id) => {\n  const eventCallback = useCallback((eventObj, ...args) => {\n    return fn && (!canScope || !id || eventObj.id === id) ? fn(eventObj, ...args) : undefined;\n  }, [fn, id]);\n  useEventEffect(event, eventCallback);\n};\nexport { generateUploaderEventHook, generateUploaderEventHookWithState };", "import { UPLOADER_EVENTS } from \"@rpldy/uploader\";\nimport { generateUploaderEventHook, generateUploaderEventHookWithState } from \"./hooksUtils\";\nconst useBatchAddListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_ADD, false);\nconst useBatchStartListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_START);\nconst useBatchFinishListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_FINISH);\nconst useBatchCancelledListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_CANCEL);\nconst useBatchErrorListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_ERROR);\nconst useBatchFinalizeListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_FINALIZE);\nconst useBatchAbortListener = generateUploaderEventHook(UPLOADER_EVENTS.BATCH_ABORT);\nconst useBatchProgressListener = generateUploaderEventHookWithState(UPLOADER_EVENTS.BATCH_PROGRESS, batch => ({\n  ...batch\n}));\nconst useItemStartListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_START);\nconst useItemFinishListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_FINISH);\nconst useItemCancelListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_CANCEL);\nconst useItemErrorListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_ERROR);\nconst useItemAbortListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_ABORT);\nconst useItemFinalizeListener = generateUploaderEventHook(UPLOADER_EVENTS.ITEM_FINALIZE);\nconst useItemProgressListener = generateUploaderEventHookWithState(UPLOADER_EVENTS.ITEM_PROGRESS, item => ({\n  ...item\n}));\nconst useRequestPreSend = generateUploaderEventHook(UPLOADER_EVENTS.REQUEST_PRE_SEND, false);\nconst useAllAbortListener = generateUploaderEventHook(UPLOADER_EVENTS.ALL_ABORT, false);\nexport { useBatchAddListener, useBatchStartListener, useBatchFinishListener, useBatchCancelledListener, useBatchAbortListener, useBatchProgressListener, useBatchErrorListener, useBatchFinalizeListener, useItemStartListener, useItemFinishListener, useItemProgressListener, useItemCancelListener, useItemErrorListener, useItemAbortListener, useItemFinalizeListener, useRequestPreSend, useAllAbortListener };", "export const UPLOAD_OPTIONS_COMP = Symbol.for(\"rpldy_component\");", "import { isProduction } from \"@rpldy/shared\";\nimport { UPLOAD_OPTIONS_COMP } from \"./consts\";\nconst logWarning = (condition, msg) => {\n  if (!isProduction() && !condition) {\n    console.warn(msg);\n  }\n};\nconst markAsUploadOptionsComponent = Component => {\n  Component[UPLOAD_OPTIONS_COMP] = true;\n};\nconst getIsUploadOptionsComponent = Component => Component[UPLOAD_OPTIONS_COMP] === true || Component.target?.[UPLOAD_OPTIONS_COMP] === true || Component.render?.[UPLOAD_OPTIONS_COMP] === true;\nexport { logWarning, markAsUploadOptionsComponent, getIsUploadOptionsComponent };", "import React, { useMemo } from \"react\";\nimport { logger } from \"@rpldy/shared\";\nimport UploadyContext, { createContextApi } from \"./UploadyContext\";\nimport useUploader from \"./hooks/useUploader\";\nconst NoDomUploady = props => {\n  const {\n    listeners,\n    debug,\n    children,\n    inputRef,\n    ...uploadOptions\n  } = props;\n  logger.setDebug(!!debug);\n  logger.debugLog(\"@@@@@@ Uploady Rendering @@@@@@\", props);\n  const uploader = useUploader(uploadOptions, listeners);\n  const api = useMemo(() => createContextApi(uploader, inputRef), [uploader, inputRef]);\n  return /*#__PURE__*/React.createElement(UploadyContext.Provider, {\n    value: api\n  }, children);\n};\nexport default NoDomUploady;", "import { useEffect, useMemo } from \"react\";\nimport { logger } from \"@rpldy/shared\";\nimport createUploader from \"@rpldy/uploader\";\nconst useUploader = (options, listeners) => {\n  const uploader = useMemo(() => {\n    logger.debugLog(\"Uploady creating a new uploader instance\", options);\n    return createUploader(options);\n  }, [options.enhancer]);\n  uploader.update(options);\n  useEffect(() => {\n    if (listeners) {\n      logger.debugLog(\"Uploady setting event listeners\", listeners);\n      Object.entries(listeners).forEach(([name, m]) => {\n        uploader.on(name, m);\n      });\n    }\n    return () => {\n      if (listeners) {\n        logger.debugLog(\"Uploady removing event listeners\", listeners);\n        Object.entries(listeners).forEach(([name, m]) => uploader.off(name, m));\n      }\n    };\n  }, [listeners, uploader]);\n  return uploader;\n};\nexport default useUploader;", "import useUploadyContext from \"./useUploadyContext\";\nconst useUploadOptions = options => {\n  const context = useUploadyContext();\n  if (options) {\n    context.setOptions(options);\n  }\n  return context.getOptions();\n};\nexport default useUploadOptions;", "import { useCallback } from \"react\";\nimport useUploadyContext from \"./useUploadyContext\";\nconst useAbortItem = () => {\n  const context = useUploadyContext();\n  return useCallback(id => context.abort(id), [context]);\n};\nexport default useAbortItem;", "import { useCallback } from \"react\";\nimport useUploadyContext from \"./useUploadyContext\";\nconst useAbortBatch = () => {\n  const context = useUploadyContext();\n  return useCallback(id => context.abortBatch(id), [context]);\n};\nexport default useAbortBatch;", "import { useCallback } from \"react\";\nimport useUploadyContext from \"./useUploadyContext\";\nconst useAbortAll = () => {\n  const context = useUploadyContext();\n  return useCallback(() => context.abort(), [context]);\n};\nexport default useAbortAll;", "function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport React, { useLayoutEffect, useState } from \"react\";\nimport useUploadyContext from \"../hooks/useUploadyContext\";\nconst createRequestUpdateHoc = ({\n  eventType,\n  getIsValidEventData,\n  getRequestData\n}) => Component => props => {\n  const context = useUploadyContext();\n  const [updater, setUpdater] = useState({\n    updateRequest: null,\n    requestData: null\n  });\n  const {\n    id\n  } = props;\n  useLayoutEffect(() => {\n    const handleEvent = (...params) => getIsValidEventData(id, ...params) === true ? new Promise(resolve => {\n      setUpdater({\n        updateRequest: data => {\n          context.off(eventType, handleEvent);\n          resolve(data);\n        },\n        requestData: getRequestData(...params)\n      });\n    }) : undefined;\n    if (id) {\n      context.on(eventType, handleEvent);\n    }\n    return () => {\n      if (id) {\n        context.off(eventType, handleEvent);\n      }\n    };\n  }, [context, id]);\n  return /*#__PURE__*/React.createElement(Component, _extends({}, props, updater));\n};\nexport { createRequestUpdateHoc };", "import { UPLOADER_EVENTS } from \"@rpldy/uploader\";\nimport { createRequestUpdateHoc } from \"./createRequestUpdateHoc\";\nconst withRequestPreSendUpdate = createRequestUpdateHoc({\n  eventType: UPLOADER_EVENTS.REQUEST_PRE_SEND,\n  getIsValidEventData: (id, {\n    items\n  }) => !!items.find(item => item.id === id),\n  getRequestData: ({\n    items,\n    options\n  }) => ({\n    items,\n    options\n  })\n});\nexport default withRequestPreSendUpdate;", "import { UPLOADER_EVENTS } from \"@rpldy/uploader\";\nimport { createRequestUpdateHoc } from \"./createRequestUpdateHoc\";\nconst withBatchStartUpdate = createRequestUpdateHoc({\n  eventType: UPLOADER_EVENTS.BATCH_START,\n  getIsValidEventData: (id, batch) => batch.id === id,\n  getRequestData: (batch, batchOptions) => ({\n    batch,\n    items: batch.items,\n    options: batchOptions\n  })\n});\nexport default withBatchStartUpdate;"],
  "mappings": "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",
  "names": ["invariant", "isFunction", "isProduction", "trigger", "event", "args", "isProduction", "import_isProduction", "trigger", "event", "args", "request_default", "isFunction", "request_default", "isFunction", "finalizeItem", "esm_default", "isProduction", "isProduction", "obj", "batchData", "state", "batch", "state", "item", "request", "invariant", "trigger", "state", "loaded", "isFunction", "trigger", "send", "isFunction", "isProduction", "trigger", "esm_default", "trigger", "invariant", "esm_default", "React", "invariant", "invariant", "import_react", "import_react", "isFunction", "isProduction", "import_react", "import_react", "esm_default", "React", "import_react", "import_react", "import_react", "import_react", "getRequestData", "React"]
}
